<Page
    x:Class="Wino.Views.ImapSetup.TestingImapConnectionPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:domain="using:Wino.Core.Domain"
    xmlns:local="using:Wino.Views.ImapSetup"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d">

    <Grid>
        <!--  Testing Connection Panel  -->
        <StackPanel
            x:Name="TestingConnectionPanel"
            HorizontalAlignment="Center"
            VerticalAlignment="Center">

            <Viewbox
                Width="26"
                Height="26"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
                <PathIcon Data="F1 M 18.75 18.125 C 18.75 18.294271 18.68815 18.440756 18.564453 18.564453 C 18.440754 18.68815 18.29427 18.75 18.125 18.75 L 13.75 18.75 C 13.75 18.925781 13.717447 19.088541 13.652344 19.238281 C 13.587239 19.388021 13.497721 19.519857 13.383789 19.633789 C 13.269855 19.747721 13.13802 19.83724 12.988281 19.902344 C 12.838541 19.967447 12.675781 20 12.5 20 L 6.25 20 C 6.074219 20 5.909831 19.967447 5.756836 19.902344 C 5.603841 19.83724 5.472005 19.74935 5.361328 19.638672 C 5.250651 19.527994 5.16276 19.396158 5.097656 19.243164 C 5.032552 19.09017 5 18.925781 5 18.75 L 0.625 18.75 C 0.455729 18.75 0.309245 18.68815 0.185547 18.564453 C 0.061849 18.440756 0 18.294271 0 18.125 C 0 17.955729 0.061849 17.809244 0.185547 17.685547 C 0.309245 17.56185 0.455729 17.5 0.625 17.5 L 5 17.5 C 5 17.154949 5.120442 16.86198 5.361328 16.621094 C 5.608724 16.373699 5.904948 16.25 6.25 16.25 L 7.5 16.25 C 7.5 16.074219 7.532552 15.911459 7.597656 15.761719 C 7.66276 15.611979 7.752278 15.480144 7.866211 15.366211 C 7.980143 15.252279 8.111979 15.162761 8.261719 15.097656 C 8.411458 15.032553 8.574219 15 8.75 15 L 8.75 13.75 L 6.875 13.75 C 6.621094 13.75 6.380208 13.701172 6.152344 13.603516 C 5.924479 13.505859 5.724284 13.370769 5.551758 13.198242 C 5.379231 13.025717 5.244141 12.825521 5.146484 12.597656 C 5.048828 12.369792 5 12.128906 5 11.875 L 5 1.875 C 5 1.621094 5.048828 1.380209 5.146484 1.152344 C 5.244141 0.92448 5.379231 0.724285 5.551758 0.551758 C 5.724284 0.379232 5.924479 0.244141 6.152344 0.146484 C 6.380208 0.048828 6.621094 0 6.875 0 L 11.875 0 C 12.128906 0 12.369791 0.048828 12.597656 0.146484 C 12.825521 0.244141 13.025716 0.379232 13.198242 0.551758 C 13.370768 0.724285 13.505859 0.92448 13.603516 1.152344 C 13.701172 1.380209 13.75 1.621094 13.75 1.875 L 13.75 11.875 C 13.75 12.128906 13.701172 12.369792 13.603516 12.597656 C 13.505859 12.825521 13.370768 13.025717 13.198242 13.198242 C 13.025716 13.370769 12.825521 13.505859 12.597656 13.603516 C 12.369791 13.701172 12.128906 13.75 11.875 13.75 L 10 13.75 L 10 15 C 10.169271 15 10.330403 15.032553 10.483398 15.097656 C 10.636393 15.162761 10.769856 15.252279 10.883789 15.366211 C 10.997721 15.480144 11.087239 15.613607 11.152344 15.766602 C 11.217447 15.919597 11.25 16.080729 11.25 16.25 L 12.5 16.25 C 12.669271 16.25 12.828775 16.282553 12.978516 16.347656 C 13.128255 16.41276 13.261719 16.503906 13.378906 16.621094 C 13.626302 16.86849 13.75 17.161459 13.75 17.5 L 18.125 17.5 C 18.29427 17.5 18.440754 17.56185 18.564453 17.685547 C 18.68815 17.809244 18.75 17.955729 18.75 18.125 Z M 11.875 12.5 C 12.04427 12.5 12.190754 12.438151 12.314453 12.314453 C 12.43815 12.190756 12.5 12.044271 12.5 11.875 L 12.5 1.875 C 12.5 1.70573 12.43815 1.559246 12.314453 1.435547 C 12.190754 1.31185 12.04427 1.25 11.875 1.25 L 6.875 1.25 C 6.705729 1.25 6.559244 1.31185 6.435547 1.435547 C 6.311849 1.559246 6.25 1.70573 6.25 1.875 L 6.25 11.875 C 6.25 12.044271 6.311849 12.190756 6.435547 12.314453 C 6.559244 12.438151 6.705729 12.5 6.875 12.5 Z M 10.625 2.5 C 10.794271 2.5 10.940755 2.56185 11.064453 2.685547 C 11.18815 2.809246 11.25 2.95573 11.25 3.125 C 11.25 3.294271 11.18815 3.440756 11.064453 3.564453 C 10.940755 3.688152 10.794271 3.75 10.625 3.75 L 8.125 3.75 C 7.955729 3.75 7.809245 3.688152 7.685547 3.564453 C 7.561849 3.440756 7.5 3.294271 7.5 3.125 C 7.5 2.95573 7.561849 2.809246 7.685547 2.685547 C 7.809245 2.56185 7.955729 2.5 8.125 2.5 Z M 10.625 5 C 10.794271 5.000001 10.940755 5.06185 11.064453 5.185547 C 11.18815 5.309245 11.25 5.455729 11.25 5.625 C 11.25 5.794271 11.18815 5.940756 11.064453 6.064453 C 10.940755 6.188151 10.794271 6.25 10.625 6.25 L 8.125 6.25 C 7.955729 6.25 7.809245 6.188151 7.685547 6.064453 C 7.561849 5.940756 7.5 5.794271 7.5 5.625 C 7.5 5.455729 7.561849 5.309245 7.685547 5.185547 C 7.809245 5.06185 7.955729 5.000001 8.125 5 Z M 12.5 18.75 L 12.5 17.5 L 10.625 17.5 C 10.481771 17.5 10.367838 17.47233 10.283203 17.416992 C 10.198567 17.361654 10.135091 17.290039 10.092773 17.202148 C 10.050455 17.114258 10.022786 17.016602 10.009766 16.90918 C 9.996744 16.801758 9.990234 16.692709 9.990234 16.582031 C 9.990234 16.523438 9.991861 16.466471 9.995117 16.411133 C 9.998372 16.355795 10 16.302084 10 16.25 L 8.75 16.25 L 8.75 16.582031 C 8.75 16.692709 8.743489 16.801758 8.730469 16.90918 C 8.717447 17.016602 8.689778 17.114258 8.647461 17.202148 C 8.605143 17.290039 8.543294 17.361654 8.461914 17.416992 C 8.380533 17.47233 8.268229 17.5 8.125 17.5 L 6.25 17.5 L 6.25 18.75 Z " />
            </Viewbox>

            <TextBlock Text="{x:Bind domain:Translator.TestingImapConnectionMessage}" />

            <muxc:ProgressBar Margin="0,4,0,0" IsIndeterminate="True" />
        </StackPanel>

        <!--  Allow untrusted certificate dialog  -->
        <Grid
            x:Name="CertificateDialog"
            MaxWidth="600"
            Padding="20"
            RowSpacing="12"
            Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Viewbox Width="52">
                <PathIcon Data="F1 M 3.671875 17.5 C 3.183594 17.5 2.716471 17.400717 2.270508 17.202148 C 1.824544 17.00358 1.433919 16.736654 1.098633 16.401367 C 0.763346 16.066082 0.496419 15.675456 0.297852 15.229492 C 0.099284 14.783529 0 14.316406 0 13.828125 L 0 6.171875 C 0 5.683595 0.099284 5.216473 0.297852 4.770508 C 0.496419 4.324545 0.763346 3.93392 1.098633 3.598633 C 1.433919 3.263348 1.824544 2.99642 2.270508 2.797852 C 2.716471 2.599285 3.183594 2.5 3.671875 2.5 L 16.328125 2.5 C 16.816406 2.5 17.283527 2.599285 17.729492 2.797852 C 18.175455 2.99642 18.56608 3.263348 18.901367 3.598633 C 19.236652 3.93392 19.50358 4.324545 19.702148 4.770508 C 19.900715 5.216473 20 5.683595 20 6.171875 L 20 6.611328 C 19.589844 6.16862 19.137369 5.800781 18.642578 5.507812 C 18.557941 5.247396 18.4375 5.009767 18.28125 4.794922 C 18.125 4.580079 17.94108 4.394532 17.729492 4.238281 C 17.517902 4.082032 17.286783 3.96159 17.036133 3.876953 C 16.78548 3.792318 16.523438 3.75 16.25 3.75 L 3.701172 3.75 C 3.375651 3.75 3.064779 3.816732 2.768555 3.950195 C 2.472331 4.08366 2.211914 4.262696 1.987305 4.487305 C 1.762695 4.711915 1.583659 4.972332 1.450195 5.268555 C 1.316732 5.564779 1.25 5.875651 1.25 6.201172 L 1.25 13.798828 C 1.25 14.13737 1.318359 14.454753 1.455078 14.750977 C 1.591797 15.047201 1.774089 15.30599 2.001953 15.527344 C 2.229818 15.748698 2.495117 15.924479 2.797852 16.054688 C 3.100586 16.184896 3.417969 16.25 3.75 16.25 L 11.25 16.25 L 11.25 17.5 Z M 4.375 7.5 C 4.205729 7.5 4.059245 7.438151 3.935547 7.314453 C 3.811849 7.190756 3.75 7.044271 3.75 6.875 C 3.75 6.705729 3.811849 6.559245 3.935547 6.435547 C 4.059245 6.31185 4.205729 6.25 4.375 6.25 L 10.625 6.25 C 10.794271 6.25 10.940755 6.31185 11.064453 6.435547 C 11.18815 6.559245 11.25 6.705729 11.25 6.875 C 11.25 7.044271 11.18815 7.190756 11.064453 7.314453 C 10.940755 7.438151 10.794271 7.5 10.625 7.5 Z M 11.25 10.546875 C 11.25 9.960938 11.368814 9.407553 11.606445 8.886719 C 11.844075 8.365886 12.163086 7.910156 12.563477 7.519531 C 12.963867 7.128907 13.427734 6.819662 13.955078 6.591797 C 14.482422 6.363933 15.039062 6.25 15.625 6.25 C 16.223957 6.25 16.788736 6.365561 17.319336 6.59668 C 17.849934 6.8278 18.313801 7.141928 18.710938 7.539062 C 19.108072 7.936198 19.422199 8.400065 19.65332 8.930664 C 19.884439 9.461264 20 10.026042 20 10.625 C 20 11.223959 19.884439 11.788737 19.65332 12.319336 C 19.422199 12.849936 19.108072 13.313803 18.710938 13.710938 C 18.313801 14.108073 17.849934 14.422201 17.319336 14.65332 C 16.788736 14.88444 16.223957 15 15.625 15 C 15.00651 15 14.430338 14.882812 13.896484 14.648438 C 13.362629 14.414062 12.90039 14.095053 12.509766 13.691406 C 12.119141 13.287761 11.811523 12.815756 11.586914 12.275391 C 11.362305 11.735026 11.25 11.158854 11.25 10.546875 Z M 4.375 13.75 C 4.205729 13.75 4.059245 13.688151 3.935547 13.564453 C 3.811849 13.440756 3.75 13.294271 3.75 13.125 C 3.75 12.955729 3.811849 12.809245 3.935547 12.685547 C 4.059245 12.56185 4.205729 12.5 4.375 12.5 L 9.375 12.5 C 9.544271 12.5 9.690755 12.56185 9.814453 12.685547 C 9.93815 12.809245 10 12.955729 10 13.125 C 10 13.294271 9.93815 13.440756 9.814453 13.564453 C 9.690755 13.688151 9.544271 13.75 9.375 13.75 Z M 13.125 19.951172 C 12.949218 19.951172 12.801105 19.890951 12.680664 19.770508 C 12.560221 19.650064 12.5 19.501953 12.5 19.326172 L 12.5 15.673828 C 12.96875 15.966797 13.468424 16.18815 13.999023 16.337891 C 14.529621 16.487631 15.071613 16.5625 15.625 16.5625 C 16.178385 16.5625 16.720377 16.487631 17.250977 16.337891 C 17.781574 16.18815 18.28125 15.966797 18.75 15.673828 L 18.75 19.326172 C 18.75 19.501953 18.689777 19.650064 18.569336 19.770508 C 18.448893 19.890951 18.300781 19.951172 18.125 19.951172 C 17.97526 19.951172 17.845051 19.9056 17.734375 19.814453 L 16.015625 18.4375 C 15.904947 18.346354 15.774738 18.300781 15.625 18.300781 C 15.47526 18.300781 15.345052 18.346354 15.234375 18.4375 L 13.515625 19.814453 C 13.404947 19.9056 13.274739 19.951172 13.125 19.951172 Z " />
            </Viewbox>

            <TextBlock
                Grid.Row="1"
                Margin="0,16,0,6"
                TextWrapping="WrapWholeWords">
                <Run Text="{x:Bind domain:Translator.IMAPSetupDialog_CertificateAllowanceRequired_Row0}" />
                <LineBreak />
                <Run Text="{x:Bind domain:Translator.IMAPSetupDialog_CertificateAllowanceRequired_Row1}" />
            </TextBlock>

            <!--  Cert details  -->
            <StackPanel Grid.Row="2" Spacing="6">
                <TextBlock TextWrapping="Wrap">
                    <Run FontWeight="SemiBold" Text="{x:Bind domain:Translator.IMAPSetupDialog_CertificateIssuer}" />
                    <LineBreak />
                    <Run x:Name="CertIssuer" />
                </TextBlock>

                <TextBlock>
                    <Run FontWeight="SemiBold" Text="{x:Bind domain:Translator.IMAPSetupDialog_CertificateValidFrom}" />
                    <LineBreak />
                    <Run x:Name="CertValidFrom" />
                </TextBlock>

                <TextBlock>
                    <Run FontWeight="SemiBold" Text="{x:Bind domain:Translator.IMAPSetupDialog_CertificateValidTo}" />
                    <LineBreak />
                    <Run x:Name="CertValidTo" />
                </TextBlock>
            </StackPanel>

            <Grid
                Grid.Row="3"
                Margin="0,16"
                ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Button
                    x:Name="DenyCertificateButton"
                    HorizontalAlignment="Stretch"
                    Click="DenyClicked"
                    Content="{x:Bind domain:Translator.Buttons_Deny}" />

                <Button
                    x:Name="AllowCertificateButton"
                    Grid.Column="1"
                    HorizontalAlignment="Stretch"
                    Click="AllowClicked"
                    Content="{x:Bind domain:Translator.Buttons_Allow}"
                    Style="{StaticResource AccentButtonStyle}" />
            </Grid>
        </Grid>
    </Grid>
</Page>
